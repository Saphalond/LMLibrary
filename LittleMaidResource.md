LittleMaidResource
===

LMLibraryでロードされるテクスチャパックやサウンドパックの読込仕様についてのメモ    

---

共通仕様としてテクスチャパックやサウンドパックのzipファイルを置く場所が変更されている  
初回起動時に[Minecraftベース]/LittleMaidResourceフォルダが作成されるのでその中へ  
テクスチャパックやサウンドパックを導入する  
キャッシュ機能が有効になっている場合はファイルの読込判断をスキップする  
そのためキャッシュ機能有効後にテクスチャパックやサウンドパックを追加した場合は反映されない  

---

## マルチモデル
LMMultiModelHandlerクラスでロード処理を実行  
下記の条件を満たしている場合にマルチモデルクラスとして判断される
  - ModelMultiBaseクラスを継承している
  - クラス名に「ModelMulti_」または「ModelLittleMaid_」を含む
  
クラス名から「ModelMulti_」または「ModelLittleMaid_」を除外したものをマルチモデル名として扱う  
例）ModelLittleMaid_SR2 -> モデル名「SR2」  

---

## テクスチャパック
LMTextureHandlerクラスでロード処理を実行  
下記の条件を満たしている場合にテクスチャパックとして判断される  
  - フォルダ構成がいずれかを満たす（大文字小文字は考慮しない）
    - assets/minecraft/textures/entity/ModelMulti/
    - assets/minecraft/textures/entity/littleMaid/
    - mob/ModelMulti/
    - mob/littleMaid/

#### テクスチャパック読込ルール
ルートパスを削除した状態で[パッケージ]/[テクスチャ名]_[モデル名]形式を判断する  
例）assets/minecraft/textures/entity/littleMaid/firis/Pretty_SR2
  - パッケージ名「firis」
  - テクスチャ名「Pretty」
  - モデル名「SR2」
モデル名がマルチモデル読込でロードされたマルチモデルと一致すること  
パッケージ名とテクスチャ名は一意のID  

##### 各パーツ判定
フォルダ内の.pngファイルをテクスチャとしてロードする  
テクスチャの判定は防具モデルを除き末尾の_以降の16進数数値をもとに判断する  

##### 16進数の数値範囲
  - 0x00 ~ 0x0F
    - 契約メイドの色単位でのテクスチャ（0が白～Fが黒）
  - 0x13
    - 契約メイドの発光テクスチャ
    - 契約メイド個別発光テクスチャが設定されていない場合にこのテクスチャが反映される
  - 0x14
    - 野生メイドの発光テクスチャ
    - 野生メイド個別発光テクスチャが設定されていない場合にこのテクスチャが反映される
  - 0x20
    - インベントリGUI背景テクスチャ
  - 0x30 ~ 0x3F
    - 野生メイドの色単位でのテクスチャ（0が白～Fが黒）
  - 0x40 ~ 0x49
    - インナーアーマーテクスチャ（ダメージドテクスチャ）
  - 0x50 ~ 0x59
    - アウターアーマーテクスチャ（ダメージドテクスチャ）
  - 0x60 ~ 0x69
    - 契約メイドの色単位での発光テクスチャ（0が白～Fが黒）
  - 0x70 ~ 0x79
    - 野生メイドの色単位での発光テクスチャ（0が白～Fが黒）
  - 0x80 ~ 0x89
    - 発光インナーアーマーテクスチャ（ダメージドテクスチャ）
  - 0x90 ~ 0x99
    - 発光インナーアーマーテクスチャ（ダメージドテクスチャ）
    

#### アーマー系テクスチャの個別ルール
アーマー系テクスチャは材質別設定としてファイル名も判断対象となっている  
default_40.png/daimond_40.pngのような形でテクスチャファイルが存在する場合、それぞれ別アーマーとして登録される  
defaultが標準テクスチャパック（firis.Pretty_SR2）diamondが別テクスチャパック（firis.Pretty_diamond_SR2）として扱われる  
  
アーマー系テクスチャはダメージによってテクスチャを変更するダメージドテクスチャ機能をもつ
  - 0-9の範囲で防具耐久度によるダメージドテクスチャを表現する
    - 0 : 100% ~ 9: 10%
    - 個別設定がない場合は数値が少ないものが優先される
    
---

## サウンドパック
LMSoundHandlerクラスでロード処理を実行  
下記の条件を満たしている場合にサウンドパックとして判断される  
  - zipファイル内にlittleMaidMob.cfgが存在する

#### littleMaidMob.cfg書式
[サウンドID]=[サウンドファイル名]の形式で設定を行う  
利用できるサウンドIDについてはfiris.lmlib.api.constant.EnumSoundに定義している  
サウンドIDについては過去バージョンから変更はない  
サウンドファイル名はzipフォルダ内のパスを指定する
  - パスの区切りは「.」
  - パスの指定は中間一致で判断される
  - 最後の「.」以降はサウンドファイル名として判断され末尾の数値の除く完全一致で判断される

例）サウンドファイル名が「PrettyVoice.attack」
  - 該当する
    - LittleMaidMob/PrettyVoice/attack1.ogg
    - Voice/PrettyVoice/attack2.ogg
  - 該当しない
    - LittleMaidMob/PrettyVoice/attackdamage1.ogg

---

## カスタムサウンドパック設定
サウンドパックを導入時に一度起動すると[Minecraftベース]/LittleMaidResourceフォルダ内にsetting_custom_soundsが生成される  
各テクスチャの色単位でのサウンドパックの割り当てが設定されているのでテクスチャ単位で設定する場合はこの設定を変更することで対応できる

